# SPDX-FileCopyrightText: Â© 2024 Romain Brault <mail@romainbrault.com>
#
# SPDX-License-Identifier: GPL-3.0-or-later

[version]
source = "vcs"

[metadata.hooks.fancy-pypi-readme]
content-type = "text/markdown"
fragments = [
    { path = "README.md" },
]

[[metadata.hooks.fancy-pypi-readme.substitutions]]
pattern = "\\[CONTRIBUTING.md\\]\\((?!https?://)\\S+?\\)"
replacement = "[CONTRIBUTING.md](https://github.com/whiteprints/whiteprints/blob/main/CONTRIBUTING.md)"

[[metadata.hooks.fancy-pypi-readme.substitutions]]
pattern = "\\[MAINTAINERS.md\\]\\((?!https?://)\\S+?\\)"
replacement = "[MAINTAINERS.md](https://github.com/whiteprints/whiteprints/blob/main/MAINTAINERS.md)"

[[metadata.hooks.fancy-pypi-readme.substitutions]]
pattern = "src=\"docs/images/banner.svg\""
replacement = "src=\"https://raw.githubusercontent.com/whiteprints/whiteprints/refs/heads/main/docs/images/banner.svg\""

[build.targets.sdist]
only-include = [
    "src/whiteprints",
]

[build.targets.wheel]
packages = [
    "src/whiteprints",
]
only-packages = true
artifacts = [
    "**/*.mo",
]
exclude = [
    "**/*.po",
    "**/*.pot",
]

[build.hooks.custom]
dependencies = [
    "hatch-vcs>=0.4.0",
    "hatch-fancy-pypi-readme",
    "babel>=1.25.0",
    "setuptools>=2.16.0",
    "typing-extensions>=4.12.1; python_version<'3.12'",
]
